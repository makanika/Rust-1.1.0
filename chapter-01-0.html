<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rust Masterclass - Ch 1: Crate Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:wght@400;700&family=Source+Sans+3:wght@400;600&family=Source+Code+Pro&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        /* Chosen Palette: Refined Neutral with a touch of deep blue */
        /* Application Structure Plan: A single, long-form chapter that introduces Cargo and Crates as the two foundational pillars of the ecosystem. This version adds an explicit, detailed section defining what a "crate" is, using analogies and a comparison table. This section is placed immediately after the introduction to Cargo's roles and before the first dependency is added, creating a logical learning progression: 1. Meet the manager (Cargo). 2. Understand the units it manages (crates). 3. Use the manager to get a unit (the first exercise). */
        /* Visualization & Content Choices:
        - Report Info: Crate types (Binary vs. Library). Goal: Define/Compare. Viz/Presentation: A clear HTML/CSS table comparing the purpose, entry point, and output of each crate type. Interaction: Static visual aid. Justification: This distinction is a common point of confusion for beginners; a direct comparison clarifies it immediately. Library/Method: Tailwind CSS.
        - Report Info: Cargo's responsibilities. Goal: Explain. Viz/Presentation: Styled info boxes using the established "NMS" analogy. Interaction: Static visual aids. Justification: Connects new concepts to the user's existing knowledge base. Library/Method: Tailwind CSS.
        - Report Info: Step-by-step exercises with solutions. Goal: Practice. Viz/Presentation: Delineated exercise blocks with collapsible solution sections. Interaction: User performs tasks in their terminal. Justification: Reinforces concepts through active, hands-on learning. Library/Method: Vanilla JS + Tailwind CSS.
        */
        /* CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. */

        body { font-family: 'Source Sans 3', sans-serif; background-color: #f8f9fa; }
        h1, h2, h3, h4, h5, h6 { font-family: 'Lora', serif; }
        pre code.hljs { font-family: 'Source Code Pro', monospace; }
        .prose { font-size: 1.125rem; line-height: 1.75; }
        .nav-link.active { color: #3b82f6; border-bottom-width: 2px; border-color: #3b82f6; }
        .code-block { position: relative; }
        .copy-btn { position: absolute; top: 0.75rem; right: 0.75rem; background-color: #374151; color: white; padding: 0.25rem 0.75rem; border-radius: 0.375rem; font-size: 0.8rem; cursor: pointer; opacity: 0; transition: opacity 0.2s, background-color 0.2s; border: 1px solid #4b5563; }
        .copy-btn:hover { background-color: #4b5563; }
        .code-block:hover .copy-btn { opacity: 1; }
        .exercise { background-color: #fefce8; border-left: 4px solid #facc15; padding: 1.5rem; border-radius: 0.5rem; margin: 2rem 0; }
        .concept-box { background-color: #f0f9ff; border-left: 4px solid #38bdf8; padding: 1.5rem; border-radius: 0.5rem; margin: 2rem 0; }
        details { background-color: #f3f4f6; border-radius: 0.5rem; padding: 1rem; }
        summary { font-weight: 600; cursor: pointer; color: #1f2937; }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <header class="bg-white/80 backdrop-blur-lg shadow-sm fixed top-0 left-0 right-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8"><div class="flex items-center justify-between h-16">
            <div class="flex items-center"><span class="font-bold text-xl text-gray-700">Rust Masterclass: Ch 1 (Crate Edition)</span></div>
            <div class="hidden md:block"><nav id="desktop-nav" class="ml-10 flex items-baseline space-x-4">
                <a href="#what-is-cargo" class="nav-link text-gray-600 hover:text-blue-500 px-3 py-2 text-sm font-medium transition-colors">What is Cargo?</a>
                <a href="#what-is-a-crate" class="nav-link text-gray-600 hover:text-blue-500 px-3 py-2 text-sm font-medium transition-colors">What is a Crate?</a>
                <a href="#workflow" class="nav-link text-gray-600 hover:text-blue-500 px-3 py-2 text-sm font-medium transition-colors">The Workflow</a>
                <a href="#project" class="nav-link text-gray-600 hover:text-blue-500 px-3 py-2 text-sm font-medium transition-colors">Our Project</a>
            </nav></div>
            <div class="-mr-2 flex md:hidden"><button id="mobile-menu-button" class="bg-gray-100 p-2 rounded-md text-gray-500"><svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg><svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg></button></div>
        </div></div>
        <div class="md:hidden hidden" id="mobile-menu"><div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
             <a href="#what-is-cargo" class="nav-link-mobile block text-gray-600 hover:bg-gray-100 p-2 rounded-md">What is Cargo?</a>
             <a href="#what-is-a-crate" class="nav-link-mobile block text-gray-600 hover:bg-gray-100 p-2 rounded-md">What is a Crate?</a>
             <a href="#workflow" class="nav-link-mobile block text-gray-600 hover:bg-gray-100 p-2 rounded-md">The Workflow</a>
             <a href="#project" class="nav-link-mobile block text-gray-600 hover:bg-gray-100 p-2 rounded-md">Our Project</a>
        </div></div>
    </header>

    <main class="pt-24"><div class="max-w-4xl mx-auto p-6 md:p-10">
        <header class="mb-16">
            <p class="text-blue-600 font-semibold">Chapter 1: The Crate Edition</p>
            <h1 class="text-5xl font-bold text-gray-800 mt-2">Cargo and the Crate: Your New Foundation</h1>
            <p class="mt-4 text-xl text-gray-600 max-w-3xl">We will begin by mastering the two most fundamental concepts in Rust: Cargo, the project manager, and the Crate, the unit of code it manages. Everything else you learn will build upon this core understanding.</p>
        </header>

        <article class="space-y-20">
            <section id="what-is-cargo" class="scroll-mt-20">
                <h2 class="text-3xl font-bold text-gray-700 border-b-2 border-gray-200 pb-3 mb-6">1.1 What is Cargo? Your Project's Central Controller</h2>
                <div class="prose max-w-none text-gray-700 space-y-4">
                    <p>In network engineering, you rely on a Network Management System (NMS) to automate, configure, and monitor your complex systems. You declare your intent, and the NMS handles the intricate steps to achieve that state.</p>
                    <p><strong>Cargo is the NMS for your Rust code.</strong></p>
                    <p>It is the official, indispensable build tool and project manager for Rust. You tell Cargo what you want your project to be, and it orchestrates the entire process of building, testing, and managing it. It has several key responsibilities:</p>
                    <div class="space-y-6 mt-8">
                        <div class="concept-box"><h4 class="font-bold text-lg text-sky-900">1. Project Architect</h4><p class="mt-2 text-sky-800">`cargo new` creates the standard, predictable directory structure for every project, giving you a consistent foundation to build upon.</p></div>
                        <div class="concept-box"><h4 class="font-bold text-lg text-sky-900">2. Build Orchestrator</h4><p class="mt-2 text-sky-800">`cargo build` intelligently invokes the Rust compiler (`rustc`) with the correct flags, managing different build profiles for development and production.</p></div>
                        <div class="concept-box"><h4 class="font-bold text-lg text-sky-900">3. Supply Chain Manager</h4><p class="mt-2 text-sky-800">This is its most critical role. Cargo is a full-featured dependency manager. It fetches the libraries your project needs from a central repository, ensuring you have the right versions every time.</p></div>
                    </div>
                </div>
            </section>

            <section id="what-is-a-crate" class="scroll-mt-20">
                <h2 class="text-3xl font-bold text-gray-700 border-b-2 border-gray-200 pb-3 mb-6">1.2 What is a Crate? The Building Blocks of Rust</h2>
                <div class="prose max-w-none text-gray-700 space-y-4">
                    <p>Cargo's main job is to manage dependencies. But what *is* a dependency in Rust? The answer is a **crate**.</p>
                    <p>A crate is the fundamental unit of code sharing and compilation in Rust. It is a package of Rust code that can be compiled and then shared with other developers. </p>
                    <p>If you're coming from Python, the analogy is direct:</p>
                    <p class="text-center text-xl font-semibold bg-white p-6 rounded-lg shadow-sm border">In Python, you `pip install` a **package** from **PyPI**.<br>In Rust, you add a **crate** from **crates.io** as a dependency.</p>
                    <p>The entire Rust ecosystem is built on the idea of developers creating useful crates and publishing them to the central public repository, <a href="https://crates.io/" class="text-blue-600 hover:underline">crates.io</a>, for others to use. There are two fundamental types of crates, and it's essential to understand the difference.</p>

                    <div class="overflow-x-auto my-8">
                        <table class="w-full text-left border-collapse">
                            <thead><tr class="bg-gray-100">
                                <th class="p-4 font-semibold border-b-2 border-gray-200">Crate Type</th>
                                <th class="p-4 font-semibold border-b-2 border-gray-200">Purpose</th>
                                <th class="p-4 font-semibold border-b-2 border-gray-200">Entry Point</th>
                                <th class="p-4 font-semibold border-b-2 border-gray-200">Output</th>
                            </tr></thead>
                            <tbody>
                                <tr class="border-b"><td class="p-4 align-top">
                                    <strong class="text-lg">Binary Crate</strong><br>(An Application)
                                </td><td class="p-4 align-top">
                                    To be compiled into an executable program that can be run.
                                </td><td class="p-4 align-top">
                                    <code class="bg-gray-200 p-1 rounded">src/main.rs</code>
                                </td><td class="p-4 align-top">
                                    An executable file (e.g., `net_tool` or `net_tool.exe`).
                                </td></tr>
                                <tr><td class="p-4 align-top">
                                    <strong class="text-lg">Library Crate</strong><br>(A Library)
                                </td><td class="p-4 align-top">
                                    To provide functionality to be used by other crates (both binary and library). Cannot be run on its own.
                                </td><td class="p-4 align-top">
                                    <code class="bg-gray-200 p-1 rounded">src/lib.rs</code>
                                </td><td class="p-4 align-top">
                                    A pre-compiled library file (e.g., `.rlib`) that other projects can link to.
                                </td></tr>
                            </tbody>
                        </table>
                    </div>
                    <p>When you run `cargo new my_project`, Cargo creates a **binary crate** by default, because it assumes you want to build a runnable application. The `clap` crate we'll use later is a **library crate**; its purpose is to provide command-line parsing functionality to our binary crate.</p>
                </div>
            </section>
            
            <section id="workflow" class="scroll-mt-20">
                <h2 class="text-3xl font-bold text-gray-700 border-b-2 border-gray-200 pb-3 mb-6">1.3 The Workflow in Action</h2>
                <div class="prose max-w-none text-gray-700 space-y-4">
                    <p>Now that we know what Cargo is and what a crate is, let's walk through the fundamental workflow you will use every day. We will create a binary crate and then add a library crate as a dependency.</p>
                    <div class="exercise">
                        <h4 class="font-bold text-lg text-yellow-900">Exercise 1.1: Creating and Building Your First Crate</h4>
                        <ol class="list-decimal list-inside mt-3 space-y-2 text-yellow-800">
                            <li><strong>Create the binary crate:</strong> In your terminal, run `cargo new hello_cargo`. This creates a new package containing a binary crate named `hello_cargo`.</li>
                            <li><strong>Change into the directory:</strong> `cd hello_cargo`.</li>
                            <li><strong>Build the crate:</strong> Run `cargo build`. Cargo invokes `rustc` on your `src/main.rs` file and produces an executable in `target/debug/hello_cargo`.</li>
                            <li><strong>Run the program:</strong> Run `cargo run`. This builds (if necessary) and then runs your executable. You should see "Hello, world!".</li>
                        </ol>
                    </div>

                    <h3 class="text-2xl font-bold text-gray-700 pt-6">Adding a Dependency Crate</h3>
                    <p>Now, let's add our first dependency. We will add the `ferris-says` library crate to our `hello_cargo` binary crate.</p>
                    <div class="exercise">
                        <h4 class="font-bold text-lg text-yellow-900">Exercise 1.2: Adding and Using a Library Crate</h4>
                        <ol class="list-decimal list-inside mt-3 space-y-2 text-yellow-800">
                            <li><strong>Add the dependency:</strong> Use the `cargo add` command.
                                <div class="code-block"><pre><code class="language-bash">cargo add ferris-says</code></pre></div>
                                This command finds the latest version of the `ferris-says` crate on crates.io and adds it to your `Cargo.toml` file.
                            </li>
                            <li><strong>Use the library's functionality:</strong> Replace the code in `src/main.rs` to call a function from the `ferris-says` crate.
                                <div class="code-block"><pre><code class="language-rust">use ferris_says::say; // Import the `say` function
use std::io::{stdout, BufWriter};

fn main() {
    let message = String::from("Learning about crates!");
    let width = message.chars().count();
    let mut writer = BufWriter::new(stdout());
    say(message.as_bytes(), width, &mut writer).unwrap();
}</code></pre></div>
                            </li>
                            <li><strong>Build again:</strong> Run `cargo build`. Watch your terminal. You will see Cargo downloading and compiling `ferris-says`. This is Cargo managing your dependencies. A `Cargo.lock` file will also be created to ensure this build is reproducible.</li>
                            <li><strong>Run your crate:</strong> Run `cargo run` to see the output!</li>
                        </ol>
                    </div>
                </div>
            </section>

            <section id="project" class="scroll-mt-20">
                 <h2 class="text-3xl font-bold text-gray-700 border-b-2 border-gray-200 pb-3 mb-6">1.4 Our First Project: The `net_tool` Binary Crate</h2>
                <div class="prose max-w-none text-gray-700 space-y-4">
                    <p>Let's solidify this knowledge by building our `net_tool`. This will be a binary crate that depends on the `clap` library crate.</p>
                     <div class="exercise">
                        <h4 class="font-bold text-lg text-yellow-900">Exercise 1.3: Building the `net_tool`</h4>
                        <ol class="list-decimal list-inside mt-3 space-y-2 text-yellow-800">
                           <li>Create a new binary crate: `cargo new net_tool` and `cd net_tool`.</li>
                           <li>Add the `clap` library crate as a dependency: `cargo add clap --features derive`.</li>
                           <li>Replace the code in `src/main.rs`:
                               <div class="code-block"><pre><code class="language-rust">use clap::Parser; // Use code from the 'clap' library crate

/// A simple network tool built as a binary crate
#[derive(Parser, Debug)]
#[command(version, about, long_about = None)]
struct Cli {
    /// The target IP address or hostname
    #[arg(short, long)]
    target: String,

    /// The port to connect to
    #[arg(short, long, default_value_t = 80)]
    port: u16,
}

// The entry point for our binary crate
fn main() {
    let cli = Cli::parse();
    println!("Executing operation on {}:{}", cli.target, cli.port);
}</code></pre></div>
                           </li>
                           <li><strong>Build and test your crate:</strong>
                               <ul>
                                   <li>Run `cargo build` to compile your binary.</li>
                                   <li>Run `cargo run -- --help` to see the help text.</li>
                                   <li>Run your tool with arguments: `cargo run -- --target 192.168.1.1 -p 8080`.</li>
                               </ul>
                           </li>
                        </ol>
                    </div>
                    <p class="mt-8 font-bold text-lg">You now have a complete mental model of the foundation. You know that Cargo is the manager, and crates are the units of code it manages. You know the difference between a binary you can run and a library you can use. This is the bedrock on which we will build everything else.</p>
                </div>
            </section>
        </article>
    </div></main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            hljs.highlightAll();
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            const openIcon = mobileMenuButton.querySelector('svg.block');
            const closeIcon = mobileMenuButton.querySelector('svg.hidden');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
                openIcon.classList.toggle('hidden');
                closeIcon.classList.toggle('hidden');
            });
            document.querySelectorAll('.nav-link-mobile').forEach(link => {
                link.addEventListener('click', () => {
                    mobileMenu.classList.add('hidden');
                    openIcon.classList.remove('hidden');
                    closeIcon.classList.add('hidden');
                });
            });
            document.querySelectorAll('.code-block').forEach(block => {
                const button = document.createElement('button');
                button.className = 'copy-btn';
                button.innerText = 'Copy';
                block.appendChild(button);
                button.addEventListener('click', () => {
                    const code = block.querySelector('pre code').innerText;
                    navigator.clipboard.writeText(code).then(() => {
                        button.innerText = 'Copied!';
                        setTimeout(() => { button.innerText = 'Copy'; }, 2000);
                    });
                });
            });
            const sections = document.querySelectorAll('main section[id]');
            const navLinks = document.querySelectorAll('#desktop-nav a.nav-link');
            const observer = new IntersectionObserver((entries) => {
                let visibleSections = [];
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        visibleSections.push(entry.target.getAttribute('id'));
                    }
                });
                if (visibleSections.length > 0) {
                     navLinks.forEach(link => {
                        link.classList.remove('active');
                        if (link.getAttribute('href') === `#${visibleSections[0]}`) { 
                            link.classList.add('active'); 
                        }
                    });
                }
            }, { rootMargin: "-15% 0px -85% 0px" });
            sections.forEach(section => { observer.observe(section); });
        });
    </script>
</body>
</html>
